<!DOCTYPE html>
<html>
<head>
  <title>Live Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <canvas id="liveChart"></canvas>

  <script>
    const socket = new WebSocket('ws://localhost:8765');
    const ctx = document.getElementById('liveChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [],
        datasets: [{
          label: 'Price',
          data: [],
          backgroundColor: 'rgba(75, 192, 192, 0.2)',
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 1,
          fill: true
        }]
      },
      options: {
        responsive: true,
        scales: {
          x: {
            display: true
          },
          y: {
            display: true,
            grid: {
              display: false
            }
          }
        },
        elements: {
          line: {
            borderWidth: 2,
            tension: 0.4  // Adjust the tension value for desired curvature
          },
          point: {
            radius: 0,  // Hide data point markers
            hoverRadius: 4  // Display data points on hover with a larger radius
          }
        },
        interaction: {
          mode: 'nearest',
          intersect: false
        },
        plugins: {
          tooltip: {
            enabled: false  // Disable default tooltip display
          }
        }
      }
    });

    socket.onmessage = function(event) {
      const data = parseFloat(event.data);
      const time = new Date().toLocaleTimeString();
      chart.data.labels.push(time);
      chart.data.datasets[0].data.push(data);
      chart.update();
    };
  </script>
</body>
</html>
